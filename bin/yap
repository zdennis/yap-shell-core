#!/usr/bin/env ruby

file = __FILE__
if File.symlink?(file)
  file = File.readlink(file)
end

trap "SIGTSTP", "IGNORE"
trap "SIGINT", "IGNORE"
trap "SIGTTIN", "IGNORE"
trap "SIGTTOU", "IGNORE"

$LOAD_PATH.unshift File.dirname(file) + '/../lib'

ENV['TERM'] ||= 'linux'

# Delete all RBENV/RVM environment variables
# Once we're booted, we don't want them being inherited
# by other child processes since those children cannot
# modify Yap's ENV, only their own child env.
ENV.keys.each do |key|
  if key =~ /^(rbenv_|rvm_)/i
    ENV.delete(key)
  end
end

require "yap"

STDOUT.sync = true
Yap.run_shell
